<!DOCTYPE html>
<html>
<head>
    <title>Manage Profiles</title>
    <script>
        async function loadCategories() {
            const response = await fetch('/categories');
            const data = await response.json();
            const select = document.getElementById('category-select');
            data.categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                select.appendChild(option);
            });
        }
        window.onload = loadCategories;
    </script>
</head>
<body>
    <h1>Manage Profiles</h1>
    <form method="post" action="/profiles">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <label for="keyword">Keyword:</label>
        <input type="text" id="keyword" name="keyword">
        <label for="category">Category:</label>
        <select id="category-select" name="category">
            <option value="">Select a category</option>
        </select>
        <button type="submit">Add Profile</button>
    </form>
    <hr>
    <h2>Existing Profiles</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Keyword</th>
                <th>Category</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for profile in profiles %}
            <tr>
                <td>{{ profile.name }}</td>
                <td>{{ profile.keyword }}</td>
                <td>{{ profile.category }}</td>
                <td>
                    <form method="get" action="/profiles/{{ profile.id }}/depth">
                        <button type="submit">View Depth</button>
                    </form>
                    <form method="post" action="/profiles/{{ profile.id }}/delete">
                        <button type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
